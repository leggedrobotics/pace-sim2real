
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the PACE sim-to-real pipeline for legged robots.">
      
      
      
        <link rel="canonical" href="https://pace.filipbjelonic.com/tutorials/basics/">
      
      
        <link rel="prev" href="../../examples/anymal/">
      
      
        <link rel="next" href="../advanced/">
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Basics - PACE Sim2Real</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../styles/pace-colors.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-creating-a-custom-pace-environment-and-identifying-parameters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="PACE Sim2Real" class="md-header__button md-logo" aria-label="PACE Sim2Real" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PACE Sim2Real
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Basics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/leggedrobotics/pace-sim2real" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    leggedrobotics/pace-sim2real
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/" class="md-tabs__link">
          
  
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="PACE Sim2Real" class="md-nav__button md-logo" aria-label="PACE Sim2Real" data-md-component="logo">
      
  <img src="../../assets/logo.svg" alt="logo">

    </a>
    PACE Sim2Real
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/leggedrobotics/pace-sim2real" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    leggedrobotics/pace-sim2real
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../importing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Importing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/anymal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ANYmal
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Basics
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Environment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pace-dc-motors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the PACE DC Motors
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-pace-specific-configs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining PACE specific configs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-scene" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Scene
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering the Environment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-the-excitation-trajectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Designing the Excitation Trajectory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolutionary-parameter-fitting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evolutionary Parameter Fitting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-and-optimization-inspection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging and Optimization Inspection
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparing-trajectories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparing Trajectories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-on-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploying on Hardware
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../best_practice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Best practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Environment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-pace-dc-motors" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the PACE DC Motors
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-pace-specific-configs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Defining PACE specific configs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-scene" class="md-nav__link">
    <span class="md-ellipsis">
      
        Creating the Scene
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#registering-the-environment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering the Environment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#designing-the-excitation-trajectory" class="md-nav__link">
    <span class="md-ellipsis">
      
        Designing the Excitation Trajectory
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evolutionary-parameter-fitting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evolutionary Parameter Fitting
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging-and-optimization-inspection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Logging and Optimization Inspection
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comparing-trajectories" class="md-nav__link">
    <span class="md-ellipsis">
      
        Comparing Trajectories
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-on-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deploying on Hardware
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="tutorial-creating-a-custom-pace-environment-and-identifying-parameters">Tutorial: Creating a Custom PACE Environment and Identifying Parameters<a class="headerlink" href="#tutorial-creating-a-custom-pace-environment-and-identifying-parameters" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>This tutorial explains how to set up a custom robot environment within the <strong>PACE (Precise Adaptation through Continuous Evolution)</strong> framework in order to estimate the dynamics of your system through evolutionary parameter identification.</p>
<p>We will walk through the full pipeline, from defining your environment and actuators, to designing excitation trajectories and running the CMA-ES-based optimization. For clarity and consistency, the examples below use <strong>ANYmal</strong> as the reference robot. When adapting this tutorial to your own platform, simply replace occurrences of <code>anymal</code> with your robot's name and adjust the corresponding parameters.</p>
<p>The tutorial covers:</p>
<ul>
<li>Creating and configuring a PACE environment</li>
<li>Defining actuator models and optimization boundaries</li>
<li>Registering the environment with IsaacLab</li>
<li>Designing excitation trajectories</li>
<li>Running evolutionary parameter fitting</li>
<li>Inspecting and comparing optimization results</li>
</ul>
<hr />
<h2 id="creating-the-environment">Creating the Environment<a class="headerlink" href="#creating-the-environment" title="Permanent link">&para;</a></h2>
<p>The core of the PACE framework is the definition and registration of a task-specific simulation environment. This environment specifies the robot configuration, its actuators, and the parameter ranges used during system identification.</p>
<p>The reference implementation for ANYmal can be found at:</p>
<div class="highlight"><pre><span></span><code>pace-sim2real/source/pace_sim2real/pace_sim2real/tasks/manager_based/pace/anymal_pace_env_cfg.py
</code></pre></div>
<p>This file provides the complete configuration of the robotic system and its associated PACE parameters.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">isaaclab.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">configclass</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">isaaclab_assets.robots.anymal</span><span class="w"> </span><span class="kn">import</span> <span class="n">ANYMAL_D_CFG</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">isaaclab.assets</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArticulationCfg</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pace_sim2real.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">PaceDCMotorCfg</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pace_sim2real</span><span class="w"> </span><span class="kn">import</span> <span class="n">PaceSim2realEnvCfg</span><span class="p">,</span> <span class="n">PaceSim2realSceneCfg</span><span class="p">,</span> <span class="n">PaceCfg</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>

<span class="n">ANYDRIVE_PACE_ACTUATOR_CFG</span> <span class="o">=</span> <span class="n">PaceDCMotorCfg</span><span class="p">(</span>
    <span class="n">joint_names_expr</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.*HAA&quot;</span><span class="p">,</span> <span class="s2">&quot;.*HFE&quot;</span><span class="p">,</span> <span class="s2">&quot;.*KFE&quot;</span><span class="p">],</span>
    <span class="n">saturation_effort</span><span class="o">=</span><span class="mf">140.0</span><span class="p">,</span>
    <span class="n">effort_limit</span><span class="o">=</span><span class="mf">89.0</span><span class="p">,</span>
    <span class="n">velocity_limit</span><span class="o">=</span><span class="mf">8.5</span><span class="p">,</span>
    <span class="n">stiffness</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;.*&quot;</span><span class="p">:</span> <span class="mf">85.0</span><span class="p">},</span>  <span class="c1"># P gain in Nm/rad</span>
    <span class="n">damping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;.*&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">},</span>  <span class="c1"># D gain in Nm s/rad</span>
    <span class="n">encoder_bias</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span>  <span class="c1"># encoder bias in radians</span>
    <span class="n">max_delay</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># max delay in simulation steps</span>
<span class="p">)</span>


<span class="nd">@configclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AnymalDPaceCfg</span><span class="p">(</span><span class="n">PaceCfg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Pace configuration for Anymal-D robot.&quot;&quot;&quot;</span>
    <span class="n">robot_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;anymal_d_sim&quot;</span>
    <span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;anymal_d_sim/chirp_data.pt&quot;</span>  <span class="c1"># located in pace_sim2real/data/anymal_d_sim/chirp_data.pt</span>
    <span class="n">bounds_params</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">49</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>  <span class="c1"># 12 + 12 + 12 + 12 + 1 = 49 parameters to optimize</span>
    <span class="n">joint_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;LF_HAA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;LF_HFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;LF_KFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RF_HAA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RF_HFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RF_KFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;LH_HAA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;LH_HFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;LH_KFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RH_HAA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RH_HFE&quot;</span><span class="p">,</span>
        <span class="s2">&quot;RH_KFE&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># set bounds for parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1e-5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[:</span><span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># armature between 1e-5 - 1.0 [kgm2]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[</span><span class="mi">12</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">7.0</span>  <span class="c1"># dof_damping between 0.0 - 7.0 [Nm s/rad]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[</span><span class="mi">24</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># friction between 0.0 - 0.5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[</span><span class="mi">36</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[</span><span class="mi">36</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># bias between -0.1 - 0.1 [rad]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds_params</span><span class="p">[</span><span class="mi">48</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span>  <span class="c1"># delay between 0.0 - 10.0 [sim steps]</span>


<span class="nd">@configclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ANYmalDPaceSceneCfg</span><span class="p">(</span><span class="n">PaceSim2realSceneCfg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for Anymal-D robot in Pace Sim2Real environment.&quot;&quot;&quot;</span>
    <span class="n">robot</span><span class="p">:</span> <span class="n">ArticulationCfg</span> <span class="o">=</span> <span class="n">ANYMAL_D_CFG</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">prim_path</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{ENV_REGEX_NS}</span><span class="s2">/Robot&quot;</span><span class="p">,</span> <span class="n">init_state</span><span class="o">=</span><span class="n">ArticulationCfg</span><span class="o">.</span><span class="n">InitialStateCfg</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
                                                  <span class="n">actuators</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;legs&quot;</span><span class="p">:</span> <span class="n">ANYDRIVE_PACE_ACTUATOR_CFG</span><span class="p">})</span>


<span class="nd">@configclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AnymalDPaceEnvCfg</span><span class="p">(</span><span class="n">PaceSim2realEnvCfg</span><span class="p">):</span>

    <span class="n">scene</span><span class="p">:</span> <span class="n">ANYmalDPaceSceneCfg</span> <span class="o">=</span> <span class="n">ANYmalDPaceSceneCfg</span><span class="p">()</span>
    <span class="n">sim2real</span><span class="p">:</span> <span class="n">PaceCfg</span> <span class="o">=</span> <span class="n">AnymalDPaceCfg</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># post init of parent</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">()</span>

        <span class="c1"># robot sim and control settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.0025</span>  <span class="c1"># 400Hz simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decimation</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># 400Hz control</span>
</code></pre></div>
<p>The custom environment consists of:</p>
<ul>
<li>The robot model and its actuators</li>
<li>The optimization parameter bounds for CMA-ES</li>
<li>PACE-specific configuration linking simulation and real-world data</li>
</ul>
<p>The following sections describe each component in detail.</p>
<hr />
<h2 id="creating-the-pace-dc-motors">Creating the PACE DC Motors<a class="headerlink" href="#creating-the-pace-dc-motors" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">ANYDRIVE_PACE_ACTUATOR_CFG</span> <span class="o">=</span> <span class="n">PaceDCMotorCfg</span><span class="p">(</span>
    <span class="n">joint_names_expr</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;.*HAA&quot;</span><span class="p">,</span> <span class="s2">&quot;.*HFE&quot;</span><span class="p">,</span> <span class="s2">&quot;.*KFE&quot;</span><span class="p">],</span>
    <span class="n">saturation_effort</span><span class="o">=</span><span class="mf">140.0</span><span class="p">,</span>
    <span class="n">effort_limit</span><span class="o">=</span><span class="mf">89.0</span><span class="p">,</span>
    <span class="n">velocity_limit</span><span class="o">=</span><span class="mf">8.5</span><span class="p">,</span>
    <span class="n">stiffness</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;.*&quot;</span><span class="p">:</span> <span class="mf">85.0</span><span class="p">},</span>
    <span class="n">damping</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;.*&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">},</span>
    <span class="n">encoder_bias</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span>
    <span class="n">max_delay</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<p>ANYmal uses a single drive type, but your robot may employ multiple actuator variants. In such cases, create one <code>PaceDCMotorCfg</code> per actuator type and associate the corresponding joints via <code>joint_names_expr</code>.</p>
<p>Key parameters include:</p>
<ul>
<li><code>saturation_effort</code>: peak torque capability</li>
<li><code>effort_limit</code>: hardware-imposed torque limit</li>
<li><code>velocity_limit</code>: maximum joint velocity</li>
<li><code>stiffness</code> and <code>damping</code>: internal PD gains used by the real actuator</li>
<li><code>encoder_bias</code>: initial bias estimate (set to zero initially)</li>
<li><code>max_delay</code>: maximum expected actuator delay in simulation steps</li>
</ul>
<p>If your robot uses a specialized actuator model, you can extend <code>PaceDCMotorCfg</code> by inheriting from your custom class and augmenting it with delay and encoder bias functionality.</p>
<hr />
<h2 id="defining-pace-specific-configs">Defining PACE specific configs<a class="headerlink" href="#defining-pace-specific-configs" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nd">@configclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AnymalDPaceCfg</span><span class="p">(</span><span class="n">PaceCfg</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>The <code>AnymalDPaceCfg</code> block defines algorithmic parameters and data linkage:</p>
<ul>
<li><code>robot_name</code>: determines logging directory</li>
<li><code>data_dir</code>: path to recorded trajectory data</li>
<li><code>joint_order</code>: alignment with real data</li>
<li><code>bounds_params</code>: optimization limits</li>
</ul>
<p>Optional CMA-ES settings (iterations, sigma, epsilon, logging frequency) can also be configured here.</p>
<p>IsaacLab determines joint ordering via breadth-first traversal, which may differ from the ordering used in your real robot’s control stack or logged data. To ensure correct alignment between simulated and real trajectories, explicitly define the joint order used on your physical system here.</p>
<p>PACE normalizes optimization parameters to the range [-1, 1]. However, the physically meaningful parameter limits are defined via <code>bounds_params</code>, which constrains the sampling domain of the CMA-ES optimizer.</p>
<p>The parameters are laid out as:</p>
<ul>
<li>Armature: <code>[0 : n_joints]</code></li>
<li>Viscous friction: <code>[n_joints : 2*n_joints]</code></li>
<li>Static friction: <code>[2*n_joints : 3*n_joints]</code></li>
<li>Encoder bias: <code>[3*n_joints : 4*n_joints]</code></li>
<li>Global delay: <code>[-1]</code></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># set bounds for parameters</span>
        <span class="o">...</span>
</code></pre></div>
<p>The values should be chosen conservatively based on hardware knowledge or prior estimates, and can be refined iteratively as needed.</p>
<hr />
<h2 id="creating-the-scene">Creating the Scene<a class="headerlink" href="#creating-the-scene" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nd">@configclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ANYmalDPaceSceneCfg</span><span class="p">(</span><span class="n">PaceSim2realSceneCfg</span><span class="p">):</span>
    <span class="o">...</span>
</code></pre></div>
<p>Here, you inherit from <code>PaceSim2realSceneCfg</code> and specify your robot USD, initial pose, and associated actuators. Ensure the initial height prevents ground penetration or unwanted contacts. Actuator naming is flexible and purely user-defined.</p>
<hr />
<h2 id="registering-the-environment">Registering the Environment<a class="headerlink" href="#registering-the-environment" title="Permanent link">&para;</a></h2>
<p>To expose the environment to the optimization pipeline, it must be registered within IsaacLab’s task registry:</p>
<div class="highlight"><pre><span></span><code>pace-sim2real/source/pace_sim2real/pace_sim2real/tasks/manager_based/__init__.py
</code></pre></div>
<p>Following the naming convention <code>Isaac-Pace-&lt;robot&gt;-v0</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">gym</span><span class="o">.</span><span class="n">register</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;Isaac-Pace-Anymal-D-v0&quot;</span><span class="p">,</span>
    <span class="n">entry_point</span><span class="o">=</span><span class="s2">&quot;isaaclab.envs:ManagerBasedRLEnv&quot;</span><span class="p">,</span>
    <span class="n">disable_env_checker</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;env_cfg_entry_point&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.pace.anymal_pace_env_cfg:AnymalDPaceEnvCfg&quot;</span>
    <span class="p">},</span>
<span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="designing-the-excitation-trajectory">Designing the Excitation Trajectory<a class="headerlink" href="#designing-the-excitation-trajectory" title="Permanent link">&para;</a></h2>
<p>Well-designed trajectories are critical for accurate parameter estimation. PACE provides a script to prototype and validate trajectories before deployment on real hardware:</p>
<div class="highlight"><pre><span></span><code>pace-sim2real/scripts/pace/data_collection.py
</code></pre></div>
<p>The following section temporarily injects example parameters for testing and can be omitted.</p>
<div class="highlight"><pre><span></span><code><span class="n">armature</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">0.1</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_ids</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">damping</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">4.5</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_ids</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">friction</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">0.05</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_ids</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">bias</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([</span><span class="mf">0.05</span><span class="p">]</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">time_lag</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">([[</span><span class="mi">5</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">int</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
</code></pre></div>
<p>Trajectory design is controlled through:</p>
<ul>
<li><code>trajectory_direction</code>: symmetric joint motion to cancel base forces</li>
<li><code>trajectory_bias</code>: center of oscillation</li>
<li><code>trajectory_scale</code>: oscillation amplitude</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">duration</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">duration</span>  <span class="c1"># seconds</span>
<span class="n">sample_rate</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">get_physics_dt</span><span class="p">()</span>  <span class="c1"># Hz</span>
<span class="n">num_steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">duration</span> <span class="o">*</span> <span class="n">sample_rate</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="p">,</span> <span class="n">steps</span><span class="o">=</span><span class="n">num_steps</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="n">f0</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">min_frequency</span>  <span class="c1"># Hz</span>
<span class="n">f1</span> <span class="o">=</span> <span class="n">args_cli</span><span class="o">.</span><span class="n">max_frequency</span>  <span class="c1"># Hz</span>

<span class="c1"># Linear chirp: phase = 2*pi*(f0*t + (f1-f0)/(2*duration)*t^2)</span>
<span class="n">phase</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">f0</span> <span class="o">*</span> <span class="n">t</span> <span class="o">+</span> <span class="p">((</span><span class="n">f1</span> <span class="o">-</span> <span class="n">f0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">duration</span><span class="p">))</span> <span class="o">*</span> <span class="n">t</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">chirp_signal</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>

<span class="n">trajectory</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">num_steps</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">joint_ids</span><span class="p">)),</span> <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="n">trajectory</span><span class="p">[:,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">chirp_signal</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">trajectory_directions</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span>
    <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>
    <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span>
<span class="p">)</span>
<span class="n">trajectory_bias</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span>
    <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span>
<span class="p">)</span>
<span class="n">trajectory_scale</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span>
    <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="n">env</span><span class="o">.</span><span class="n">unwrapped</span><span class="o">.</span><span class="n">device</span>
<span class="p">)</span>
<span class="n">trajectory</span><span class="p">[:,</span> <span class="n">joint_ids</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">trajectory</span><span class="p">[:,</span> <span class="n">joint_ids</span><span class="p">]</span> <span class="o">+</span> <span class="n">trajectory_bias</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="o">*</span> <span class="n">trajectory_directions</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">trajectory_scale</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>While chirp-based signals provide a practical baseline, more advanced trajectory optimization approaches may further improve system identification quality.</p>
<hr />
<h2 id="evolutionary-parameter-fitting">Evolutionary Parameter Fitting<a class="headerlink" href="#evolutionary-parameter-fitting" title="Permanent link">&para;</a></h2>
<p>Once data collection is complete and stored in the correct directory, launch the optimization using:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/pace-sim2real
python<span class="w"> </span>scripts/pace/fit.py<span class="w"> </span>--headless<span class="w"> </span>--num_envs<span class="o">=</span><span class="m">4096</span><span class="w"> </span>--task<span class="o">=</span>Isaac-Pace-Anymal-D-v0
</code></pre></div>
<p>This process utilizes the <code>CMAESOptimizer</code> located at:</p>
<div class="highlight"><pre><span></span><code>pace-sim2real/source/pace_sim2real/pace_sim2real/optim/cma_es.py
</code></pre></div>
<hr />
<h2 id="logging-and-optimization-inspection">Logging and Optimization Inspection<a class="headerlink" href="#logging-and-optimization-inspection" title="Permanent link">&para;</a></h2>
<p>All optimization logs are stored under:</p>
<div class="highlight"><pre><span></span><code>pace-sim2real/logs/pace/anymal_d_sim
</code></pre></div>
<p>Key files include:</p>
<ul>
<li><code>config.pt</code>: full configuration and dataset metadata</li>
<li><code>best_trajectory.pt</code>: best simulated joint trajectory</li>
<li><code>mean_xxx.pt</code>: mean parameter estimates per iteration</li>
</ul>
<p>If logging of the full optimization process is enabled:</p>
<div class="highlight"><pre><span></span><code><span class="n">save_optimization_process</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div>
<p>Additional files include:</p>
<ul>
<li><code>progress.pt</code>: best scores and complete parameter history over the iterations</li>
</ul>
<hr />
<h2 id="comparing-trajectories">Comparing Trajectories<a class="headerlink" href="#comparing-trajectories" title="Permanent link">&para;</a></h2>
<p>During or after optimization, visualize the current best trajectory using:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>scripts/pace/plot_trajectory.py<span class="w"> </span>--plot_trajectory<span class="w"> </span>--robot_name<span class="o">=</span>anymal_d_sim
</code></pre></div>
<p>After completion, include <code>--plot_score</code> to visualize convergence behavior over iterations if desired.</p>
<hr />
<h2 id="deploying-on-hardware">Deploying on Hardware<a class="headerlink" href="#deploying-on-hardware" title="Permanent link">&para;</a></h2>
<p>To use the identified parameters in your learning environment, integrate the PACE actuator model into your project.</p>
<p>Copy the following files (or directly import them in your learning environment):</p>
<ul>
<li><code>pace-sim2real/source/pace_sim2real/pace_sim2real/utils/pace_actuator.py</code></li>
<li><code>pace-sim2real/source/pace_sim2real/pace_sim2real/utils/pace_actuator_cfg.py</code></li>
</ul>
<p>Use the following procedure:</p>
<ol>
<li>Import <code>PaceDCMotorCfg</code> (and optionally <code>PaceDCMotor</code>) into your project.
    <div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pace_sim2real.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">PaceDCMotorCfg</span><span class="p">,</span> <span class="n">PaceDCMotor</span>
</code></pre></div></li>
<li>
<p>During initialization, set:</p>
<ul>
<li><code>max_delay</code></li>
<li><code>encoder_bias</code></li>
</ul>
<p>using the values obtained from the parameter identification step.</p>
</li>
<li>
<p>Prior to training, configure your articulation object with the optimized parameters for:</p>
<ul>
<li><code>joint_armature</code></li>
<li><code>joint_viscous_friction</code></li>
<li><code>joint_friction</code></li>
</ul>
</li>
</ol>
<hr />
<p>This concludes the complete workflow for creating a custom PACE environment and performing evolutionary system identification. Adjust parameters iteratively based on observed performance and physical plausibility to achieve optimal sim-to-real alignment.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../examples/anymal/" class="md-footer__link md-footer__link--prev" aria-label="Previous: ANYmal">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                ANYmal
              </div>
            </div>
          </a>
        
        
          
          <a href="../advanced/" class="md-footer__link md-footer__link--next" aria-label="Next: Advanced">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Advanced
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.highlight", "search.suggest", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>